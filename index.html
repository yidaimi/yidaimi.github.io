<!DOCTYPE html>
<html>

    <head>

        <meta charset="UTF-8"> <!-- for HTML5 -->
        <!--<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />-->
        <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <!--cordova依赖-->
        <script type="text/javascript" src="http://myinjection/cordova.js"></script>
        <script type="text/javascript" src="http://myinjection/js/index.js"></script>
        <script>
            function whatever(){
                alert('This is whatever');
            }

        </script>
        <!--测试cordova的代码-->
        <script type="text/javascript">
        
     				var destinationType;
             
            function onLoad() {
            			alert('This is onload function');
    				document.addEventListener("deviceready", onDeviceReady, false);
						}
            

            //Cordova加载完成会触发
            function onDeviceReady() {
                destinationType=navigator.camera.DestinationType;
                document.addEventListener("backbutton", onBackKeyDown, false);
            }

            //拍照
            function capturePhoto() {
                
                //拍照并获取Base64编码的图像（quality : 存储图像的质量，范围是[0,100]）
                navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
                                            destinationType: destinationType.DATA_URL }
                                            );
            }
         
            //拍照成功
            function onPhotoDataSuccess(imageData) {
                console.log(imageData);
                var smallImage = document.getElementById('smallImage');
                smallImage.style.display = 'block';
                smallImage.src = "data:image/jpeg;base64," + imageData;
            }
 
            //拍照失败
            function onFail(message) {
                alert('拍照失败: ' + message);
            }

    				function onBackKeyDown(){
    						alert('back!!!');
    				}
        
        
        </script> 
        
        
        
    </head>
    <body onload="onLoad()">
        <!-- cordova测试代码开始 -->
        <div class="app">
            <h1>Apache Cordova</h1>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready!!!This is from Server</p>
                <button onclick="capturePhoto();">take photo</button>
                <img style="display:none;width:240px;height:320px;" id="smallImage" src="" />
            </div>
        </div>        
         <!-- cordova测试代码结束 -->


    </body>
</html>
